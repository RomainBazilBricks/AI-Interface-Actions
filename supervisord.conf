[supervisord]
nodaemon=true
user=root
pidfile=/tmp/supervisord.pid

[unix_http_server]
file=/tmp/supervisor.sock
chmod=0700

[supervisorctl]
serverurl=unix:///tmp/supervisor.sock

[rpcinterface:supervisor]
supervisor.rpcinterface_factory = supervisor.rpcinterface:make_main_rpcinterface

[program:xvfb]
command=/usr/bin/Xvfb :1 -screen 0 1920x1080x24 -ac +extension GLX +render -noreset
autorestart=true
user=appuser
stdout_logfile=/app/logs/xvfb.log
stderr_logfile=/app/logs/xvfb.log
priority=100

[program:fluxbox]
command=/usr/bin/fluxbox
environment=DISPLAY=":1"
autorestart=true
user=appuser
stdout_logfile=/app/logs/fluxbox.log
stderr_logfile=/app/logs/fluxbox.log
priority=200

[program:x11vnc]
command=/usr/bin/x11vnc -display :1 -nopw -listen 0.0.0.0 -xkb -ncache 10 -ncache_cr -forever -shared
autorestart=true
user=appuser
stdout_logfile=/app/logs/vnc.log
stderr_logfile=/app/logs/vnc.log
priority=300

[program:app]
command=python -m ai_interface_actions.main
directory=/app
environment=DISPLAY=":1"
autorestart=true
user=appuser
stdout_logfile=/app/logs/app.log
stderr_logfile=/app/logs/app.log
priority=400 